<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="
        http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">

<!--    <changeSet id="20250831120111" author="Pravendra Kumar">-->
<!--        <addColumn tableName="rcm_employee">-->
<!--            <column name="empCode" type="varchar(50)">-->
<!--                <constraints nullable="false"/>-->
<!--            </column>-->
<!--        </addColumn>-->
<!--    </changeSet>-->

<!--    <changeSet id="20250907074123" author="Pravendra Kumar">-->
<!--        <addColumn tableName="rcm_employee">-->
<!--            <column name="manager" type="varchar(255)"/>-->
<!--        </addColumn>-->
<!--    </changeSet>-->

    <changeSet id="20250914091734-1" author="Pravendra Kumar">
        <comment>Change challan.date from DATE to DATETIME for LocalDateTime mapping</comment>
        <modifyDataType
                tableName="challan"
                columnName="date"
                newDataType="DATETIME"/>
    </changeSet>

    <changeSet id="20250914-1" author="Pravendra Kumar">
        <comment>Change challan.date to DATETIME</comment>
        <modifyDataType tableName="challan" columnName="date" newDataType="DATETIME"/>
    </changeSet>

    <changeSet id="20250914-2" author="Pravendra">
        <comment>Ensure challan.date is DATETIME</comment>
        <modifyDataType tableName="challan" columnName="date" newDataType="DATETIME"/>
    </changeSet>

    <changeSet id="a20250914210123" author="Pravendra Kumar">
        <addColumn tableName="challan_item">
            <column name="process" type="varchar(255)"/>
            <column name="hsn_code" type="varchar(255)"/>
            <column name="unit" type="varchar(255)"/>
        </addColumn>
    </changeSet>

    <changeSet id="20250916214122" author="Pravendra Kumar">
        <dropColumn tableName="challan_item" columnName="hsnCode"/>
    </changeSet>

    <changeSet id="202509171006" author="Pravendra Kumar">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists tableName="challan" columnName="ref_ch_no"/>
            </not>
        </preConditions>

        <addColumn tableName="challan">
            <column name="modified_date" type="varchar(255)"/>
        </addColumn>
    </changeSet>

    <changeSet id="20251227092411" author="Pravendra Kumar">
        <addColumn tableName="challan">
            <column name="modified_date" type="DATETIME">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="3-add-columns-to-challan-item" author="pravendra">
        <addColumn tableName="challan_item">
            <column name="added_at" type="TIMESTAMP"/>
            <column name="added_on_modified_date"
                    type="BOOLEAN"
                    defaultValueBoolean="false"/>
        </addColumn>
    </changeSet>
</databaseChangeLog>
